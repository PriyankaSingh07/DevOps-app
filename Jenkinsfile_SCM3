def label = "jenkins-slave"
podTemplate(cloud: 'kubernetes', label: label, name: 'jenkins-slave', namespace: 'cicd-fin-test', containers: [
    containerTemplate(
        name: 'jnlp',
        image: 'utilitynode:latest',
        ttyEnabled: true,
        privileged: true,
        alwaysPullImage: false,
        workingDir: '/home/jenkins/agent',
        command: 'jenkins-agent'
    )
],
serviceAccount: 'jenkins-fin-test',
volumes: [
    persistentVolumeClaim(mountPath: '/var/jenkins_home', claimName: 'jenkins-slave-fin-test-pvc', readOnly: false)
]
){

    node('jenkins-slave') {
        stage('SCM') {
        steps {
            container('jnlp') {
            checkout scm
            }
        }

    }
}
}
